<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="assets/css/main.css" />
</head>
<body class="is-preload">
<div id="wrapper">
    <!-- Header -->
    <header id="header">
        <h1><a href="index">Java alkalmazások</a></h1>
        <nav class="links">
            <ul>
                <li><a href="/soap">SOAP Menü</a></li>
                <li><a href="#">Forex Menü</a></li>
            </ul>
        </nav>
        <nav class="main">
            <ul>
                <li class="search">
                    <a class="fa-search" href="#search">Keresés</a>
                    <form id="search" method="get" action="#">
                        <input type="text" name="query" placeholder="Keresés" />
                    </form>
                </li>
                <li class="menu">
                    <a class="fa-bars" href="#menu">Menu</a>
                </li>
            </ul>
        </nav>
    </header>
    <div id="main">
        <form th:action="@{/soap}" th:object="${param}" method="post">
            <select th:field="*{currency}">
                <option value="EUR">EUR</option>
                <option value="USD">USD</option>
                <option value="GBP">GBP</option>
                <option value="JPY">JPY</option>
            </select><br>

            Start date:
            <input type="date" th:field="*{startDate}" id="startDate"><br>

            End date:
            <input type="date" th:field="*{endDate}" id="endDate"><br>

            <input type="submit" id="submitBtn" value="Lekérdezés" disabled>
        </form>

        <!-- Hibaüzenet, ha szerver oldali validáció jelez -->
        <div th:if="${error}" style="color:red; font-weight:bold;">
            <p th:text="${error}"></p>
        </div>

        <script>
            // Ma dátum beállítása max értéknek (ne lehessen jövő dátum)
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('startDate').setAttribute('max', today);
            document.getElementById('endDate').setAttribute('max', today);

            // Elemszelektorok
            const startDateInput = document.getElementById('startDate');
            const endDateInput = document.getElementById('endDate');
            const submitBtn = document.getElementById('submitBtn');

            // Ellenőrzés: mindkét dátum ki van-e választva
            function checkDates() {
                const startDate = startDateInput.value;
                const endDate = endDateInput.value;

                if (startDate && endDate) {
                    submitBtn.disabled = false;  // mindkettő megadva → engedélyezett
                } else {
                    submitBtn.disabled = true;   // hiányzik valamelyik → tiltott
                }
            }

            // Eseményfigyelők a dátumválasztáshoz
            startDateInput.addEventListener('change', checkDates);
            endDateInput.addEventListener('change', checkDates);
        </script>
    </div>
</div>
</body>
</html>